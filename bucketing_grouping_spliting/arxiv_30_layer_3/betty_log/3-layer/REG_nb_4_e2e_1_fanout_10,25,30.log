main start at this time 1691273887.978057
ogbn-arxiv
# Nodes: 169343
# Edges: 2315598
# Train: 90941
# Val: 29799
# Test: 48603
# Classes: 40

in feats:  128
REG start----................................
Convert a graph into a bidirected graph: 1.401 seconds, peak memory: 27.746 GB
Construct multi-constraint weights: 0.000 seconds, peak memory: 27.746 GB
Metis partitioning: 6.110 seconds, peak memory: 28.566 GB
Split the graph: 4.360 seconds
Construct subgraphs: 0.031 seconds
REG metis partition end ----................................
REG construction  time spent:  4.009714365005493
pure dgl.metis_partition the time spent:  11.920332431793213
check_connections_block*********************************

the find indices time spent  0.0553133487701416

in edges time spent  0.16372227668762207
local to global src and eids time spent  0.26714038848876953
time gen tails  0.04268169403076172
res  length 4
check_connections_block*********************************

the find indices time spent  0.06630539894104004

in edges time spent  0.45116591453552246
local to global src and eids time spent  0.6645140647888184
time gen tails  0.08143997192382812
res  length 4
check_connections_block*********************************

the find indices time spent  0.08483624458312988

in edges time spent  0.539100170135498
local to global src and eids time spent  0.7516331672668457
time gen tails  0.11194539070129395
res  length 4
connection checking time:  3.7304258346557617
block generation total time  1.9691121578216553
step  0
----------------------------------------after batch_pred = model(blocks, batch_inputs)
 Nvidia-smi: 5.51171875 GB
    Memory Allocated: 3.603637218475342  GigaBytes
Max Memory Allocated: 3.892557144165039  GigaBytes

----------------------------------------after loss function
 Nvidia-smi: 5.51171875 GB
    Memory Allocated: 3.6074624061584473  GigaBytes
Max Memory Allocated: 3.892557144165039  GigaBytes

step  1
----------------------------------------after batch_pred = model(blocks, batch_inputs)
 Nvidia-smi: 5.525390625 GB
    Memory Allocated: 2.782566547393799  GigaBytes
Max Memory Allocated: 3.892557144165039  GigaBytes

----------------------------------------after loss function
 Nvidia-smi: 5.525390625 GB
    Memory Allocated: 2.786090850830078  GigaBytes
Max Memory Allocated: 3.892557144165039  GigaBytes

step  2
----------------------------------------after batch_pred = model(blocks, batch_inputs)
 Nvidia-smi: 8.892578125 GB
    Memory Allocated: 5.696934223175049  GigaBytes
Max Memory Allocated: 6.204062461853027  GigaBytes

----------------------------------------after loss function
 Nvidia-smi: 8.892578125 GB
    Memory Allocated: 5.700469970703125  GigaBytes
Max Memory Allocated: 6.204062461853027  GigaBytes

step  3
----------------------------------------after batch_pred = model(blocks, batch_inputs)
 Nvidia-smi: 11.708984375 GB
    Memory Allocated: 5.729042053222656  GigaBytes
Max Memory Allocated: 6.212765216827393  GigaBytes

----------------------------------------after loss function
 Nvidia-smi: 11.708984375 GB
    Memory Allocated: 5.7324137687683105  GigaBytes
Max Memory Allocated: 6.212765216827393  GigaBytes

pure train time  1.823584794998169
-----------------------------------------after optimizer zero grad
 Nvidia-smi: 11.708984375 GB
    Memory Allocated: 0.15027284622192383  GigaBytes
Max Memory Allocated: 6.212765216827393  GigaBytes

----------------------------------------------------------pseudo_mini_loss sum 4.197135925292969
REG start----................................
Convert a graph into a bidirected graph: 1.441 seconds, peak memory: 52.069 GB
Construct multi-constraint weights: 0.000 seconds, peak memory: 52.069 GB
Metis partitioning: 5.952 seconds, peak memory: 52.883 GB
Split the graph: 4.641 seconds
Construct subgraphs: 0.023 seconds
REG metis partition end ----................................
REG construction  time spent:  3.976027488708496
pure dgl.metis_partition the time spent:  12.074304580688477
check_connections_block*********************************

the find indices time spent  0.06013321876525879

in edges time spent  0.1654520034790039
local to global src and eids time spent  0.2751433849334717
time gen tails  0.0444948673248291
res  length 4
check_connections_block*********************************

the find indices time spent  0.07640504837036133

in edges time spent  0.44616055488586426
local to global src and eids time spent  0.6733994483947754
time gen tails  0.08640885353088379
res  length 4
check_connections_block*********************************

the find indices time spent  0.09705233573913574

in edges time spent  0.513556957244873
local to global src and eids time spent  0.7901456356048584
time gen tails  0.12491059303283691
res  length 4
connection checking time:  3.8378102779388428
block generation total time  2.030090808868408
step  0
----------------------------------------after batch_pred = model(blocks, batch_inputs)
 Nvidia-smi: 11.708984375 GB
    Memory Allocated: 2.8050661087036133  GigaBytes
Max Memory Allocated: 6.212765216827393  GigaBytes

----------------------------------------after loss function
 Nvidia-smi: 11.708984375 GB
    Memory Allocated: 2.808587074279785  GigaBytes
Max Memory Allocated: 6.212765216827393  GigaBytes

step  1
----------------------------------------after batch_pred = model(blocks, batch_inputs)
 Nvidia-smi: 11.708984375 GB
    Memory Allocated: 3.537970542907715  GigaBytes
Max Memory Allocated: 6.212765216827393  GigaBytes

----------------------------------------after loss function
 Nvidia-smi: 11.708984375 GB
    Memory Allocated: 3.542092800140381  GigaBytes
Max Memory Allocated: 6.212765216827393  GigaBytes

step  2
----------------------------------------after batch_pred = model(blocks, batch_inputs)
 Nvidia-smi: 12.330078125 GB
    Memory Allocated: 6.006297588348389  GigaBytes
Max Memory Allocated: 6.542474269866943  GigaBytes

----------------------------------------after loss function
 Nvidia-smi: 12.330078125 GB
    Memory Allocated: 6.010265350341797  GigaBytes
Max Memory Allocated: 6.542474269866943  GigaBytes

step  3
----------------------------------------after batch_pred = model(blocks, batch_inputs)
 Nvidia-smi: 12.33203125 GB
    Memory Allocated: 5.735586643218994  GigaBytes
Max Memory Allocated: 6.542474269866943  GigaBytes

----------------------------------------after loss function
 Nvidia-smi: 12.33203125 GB
    Memory Allocated: 5.739127159118652  GigaBytes
Max Memory Allocated: 6.542474269866943  GigaBytes

pure train time  1.417398452758789
-----------------------------------------after optimizer zero grad
 Nvidia-smi: 12.33203125 GB
    Memory Allocated: 0.14987468719482422  GigaBytes
Max Memory Allocated: 6.542474269866943  GigaBytes

----------------------------------------------------------pseudo_mini_loss sum 3.9735522270202637
REG start----................................
Convert a graph into a bidirected graph: 1.422 seconds, peak memory: 63.597 GB
Construct multi-constraint weights: 0.000 seconds, peak memory: 63.597 GB
Metis partitioning: 5.918 seconds, peak memory: 64.408 GB
Split the graph: 4.636 seconds
Construct subgraphs: 0.017 seconds
REG metis partition end ----................................
REG construction  time spent:  3.908277750015259
pure dgl.metis_partition the time spent:  12.01000165939331
check_connections_block*********************************

the find indices time spent  0.0643472671508789

in edges time spent  0.1804494857788086
local to global src and eids time spent  0.2718350887298584
time gen tails  0.0468287467956543
res  length 4
check_connections_block*********************************

the find indices time spent  0.0765838623046875

in edges time spent  0.46265125274658203
local to global src and eids time spent  0.6641368865966797
time gen tails  0.0875244140625
res  length 4
check_connections_block*********************************

the find indices time spent  0.09499430656433105

in edges time spent  0.5118069648742676
local to global src and eids time spent  0.7414665222167969
time gen tails  0.11993026733398438
res  length 4
connection checking time:  3.766115427017212
block generation total time  2.0001769065856934
step  0
----------------------------------------after batch_pred = model(blocks, batch_inputs)
 Nvidia-smi: 12.33203125 GB
    Memory Allocated: 2.7161684036254883  GigaBytes
Max Memory Allocated: 6.542474269866943  GigaBytes

----------------------------------------after loss function
 Nvidia-smi: 12.33203125 GB
    Memory Allocated: 2.719654083251953  GigaBytes
Max Memory Allocated: 6.542474269866943  GigaBytes

step  1
----------------------------------------after batch_pred = model(blocks, batch_inputs)
 Nvidia-smi: 12.33203125 GB
    Memory Allocated: 3.565070629119873  GigaBytes
Max Memory Allocated: 6.542474269866943  GigaBytes

----------------------------------------after loss function
 Nvidia-smi: 12.33203125 GB
    Memory Allocated: 3.5685300827026367  GigaBytes
Max Memory Allocated: 6.542474269866943  GigaBytes

step  2
----------------------------------------after batch_pred = model(blocks, batch_inputs)
 Nvidia-smi: 12.33203125 GB
    Memory Allocated: 5.894099712371826  GigaBytes
Max Memory Allocated: 6.542474269866943  GigaBytes

----------------------------------------after loss function
 Nvidia-smi: 12.33203125 GB
    Memory Allocated: 5.897937774658203  GigaBytes
Max Memory Allocated: 6.542474269866943  GigaBytes

step  3
----------------------------------------after batch_pred = model(blocks, batch_inputs)
 Nvidia-smi: 12.33203125 GB
    Memory Allocated: 5.711592197418213  GigaBytes
Max Memory Allocated: 6.542474269866943  GigaBytes

----------------------------------------after loss function
 Nvidia-smi: 12.33203125 GB
    Memory Allocated: 5.7153825759887695  GigaBytes
Max Memory Allocated: 6.542474269866943  GigaBytes

pure train time  1.4282469749450684
-----------------------------------------after optimizer zero grad
 Nvidia-smi: 12.33203125 GB
    Memory Allocated: 0.15286827087402344  GigaBytes
Max Memory Allocated: 6.542474269866943  GigaBytes

----------------------------------------------------------pseudo_mini_loss sum 3.8462131023406982
loading full batch data spends  0.1254744529724121
REG start----................................
Convert a graph into a bidirected graph: 1.421 seconds, peak memory: 65.270 GB
Construct multi-constraint weights: 0.000 seconds, peak memory: 65.270 GB
Metis partitioning: 6.221 seconds, peak memory: 65.270 GB
Split the graph: 5.124 seconds
Construct subgraphs: 0.025 seconds
REG metis partition end ----................................
REG construction  time spent:  3.8417911529541016
pure dgl.metis_partition the time spent:  12.80808424949646
check_connections_block*********************************

the find indices time spent  0.061841726303100586

in edges time spent  0.1605205535888672
local to global src and eids time spent  0.27741241455078125
time gen tails  0.04786849021911621
res  length 4
check_connections_block*********************************

the find indices time spent  0.07875347137451172

in edges time spent  0.4588286876678467
local to global src and eids time spent  0.6571929454803467
time gen tails  0.08501482009887695
res  length 4
check_connections_block*********************************

the find indices time spent  0.09442281723022461

in edges time spent  0.4918339252471924
local to global src and eids time spent  0.7619729042053223
time gen tails  0.11979126930236816
res  length 4
connection checking time:  3.7496659755706787
block generation total time  2.031222343444824
generate_dataloader_block spend   23.225810050964355
step  0
----------------------------------------after batch_pred = model(blocks, batch_inputs)
 Nvidia-smi: 12.33203125 GB
    Memory Allocated: 3.6684770584106445  GigaBytes
Max Memory Allocated: 6.542474269866943  GigaBytes

----------------------------------------after loss function
 Nvidia-smi: 12.33203125 GB
    Memory Allocated: 3.672787666320801  GigaBytes
Max Memory Allocated: 6.542474269866943  GigaBytes

step  1
----------------------------------------after batch_pred = model(blocks, batch_inputs)
 Nvidia-smi: 12.33203125 GB
    Memory Allocated: 2.7145824432373047  GigaBytes
Max Memory Allocated: 6.542474269866943  GigaBytes

----------------------------------------after loss function
 Nvidia-smi: 12.33203125 GB
    Memory Allocated: 2.718052387237549  GigaBytes
Max Memory Allocated: 6.542474269866943  GigaBytes

step  2
----------------------------------------after batch_pred = model(blocks, batch_inputs)
 Nvidia-smi: 12.33203125 GB
    Memory Allocated: 5.686364650726318  GigaBytes
Max Memory Allocated: 6.542474269866943  GigaBytes

----------------------------------------after loss function
 Nvidia-smi: 12.33203125 GB
    Memory Allocated: 5.690167427062988  GigaBytes
Max Memory Allocated: 6.542474269866943  GigaBytes

step  3
----------------------------------------after batch_pred = model(blocks, batch_inputs)
 Nvidia-smi: 12.33203125 GB
    Memory Allocated: 5.999728202819824  GigaBytes
Max Memory Allocated: 6.542474269866943  GigaBytes

----------------------------------------after loss function
 Nvidia-smi: 12.33203125 GB
    Memory Allocated: 6.00335168838501  GigaBytes
Max Memory Allocated: 6.542474269866943  GigaBytes

pure train time  1.4479053020477295
-----------------------------------------after optimizer zero grad
 Nvidia-smi: 12.33203125 GB
    Memory Allocated: 0.1601405143737793  GigaBytes
Max Memory Allocated: 6.542474269866943  GigaBytes

----------------------------------------------------------pseudo_mini_loss sum 3.8048951625823975
loading full batch data spends  0.1651442050933838
REG start----................................
Convert a graph into a bidirected graph: 1.424 seconds, peak memory: 65.399 GB
Construct multi-constraint weights: 0.000 seconds, peak memory: 65.399 GB
Metis partitioning: 6.065 seconds, peak memory: 65.399 GB
Split the graph: 4.416 seconds
Construct subgraphs: 0.028 seconds
REG metis partition end ----................................
REG construction  time spent:  4.0893824100494385
pure dgl.metis_partition the time spent:  11.95136547088623
check_connections_block*********************************

the find indices time spent  0.06996655464172363

in edges time spent  0.17087912559509277
local to global src and eids time spent  0.27602386474609375
time gen tails  0.05028080940246582
res  length 4
check_connections_block*********************************

the find indices time spent  0.07606220245361328

in edges time spent  0.46742844581604004
local to global src and eids time spent  0.6646335124969482
time gen tails  0.08636879920959473
res  length 4
check_connections_block*********************************

the find indices time spent  0.09365558624267578

in edges time spent  0.4994831085205078
local to global src and eids time spent  0.7771501541137695
time gen tails  0.13415217399597168
res  length 4
connection checking time:  3.8201041221618652
block generation total time  2.0721559524536133
generate_dataloader_block spend   22.785138368606567
step  0
----------------------------------------after batch_pred = model(blocks, batch_inputs)
 Nvidia-smi: 12.33203125 GB
    Memory Allocated: 3.752835750579834  GigaBytes
Max Memory Allocated: 6.542474269866943  GigaBytes

----------------------------------------after loss function
 Nvidia-smi: 12.33203125 GB
    Memory Allocated: 3.7566051483154297  GigaBytes
Max Memory Allocated: 6.542474269866943  GigaBytes

step  1
----------------------------------------after batch_pred = model(blocks, batch_inputs)
 Nvidia-smi: 12.33203125 GB
    Memory Allocated: 2.9800686836242676  GigaBytes
Max Memory Allocated: 6.542474269866943  GigaBytes

----------------------------------------after loss function
 Nvidia-smi: 12.33203125 GB
    Memory Allocated: 2.9839859008789062  GigaBytes
Max Memory Allocated: 6.542474269866943  GigaBytes

step  2
----------------------------------------after batch_pred = model(blocks, batch_inputs)
 Nvidia-smi: 12.33203125 GB
    Memory Allocated: 5.791618347167969  GigaBytes
Max Memory Allocated: 6.542474269866943  GigaBytes

----------------------------------------after loss function
 Nvidia-smi: 12.33203125 GB
    Memory Allocated: 5.795048236846924  GigaBytes
Max Memory Allocated: 6.542474269866943  GigaBytes

step  3
----------------------------------------after batch_pred = model(blocks, batch_inputs)
 Nvidia-smi: 12.33203125 GB
    Memory Allocated: 5.724196434020996  GigaBytes
Max Memory Allocated: 6.542474269866943  GigaBytes

----------------------------------------after loss function
 Nvidia-smi: 12.33203125 GB
    Memory Allocated: 5.727629661560059  GigaBytes
Max Memory Allocated: 6.542474269866943  GigaBytes

pure train time  1.4875123500823975
-----------------------------------------after optimizer zero grad
 Nvidia-smi: 12.33203125 GB
    Memory Allocated: 0.15474319458007812  GigaBytes
Max Memory Allocated: 6.542474269866943  GigaBytes

----------------------------------------------------------pseudo_mini_loss sum 3.7912893295288086
Total (block generation + training)time/epoch 24.88949203491211
pure train time/epoch 1.4875123500823975

num_input_list  [472558, 475916, 472387, 476237, 481229]
