main start at this time 1691273637.964303
ogbn-arxiv
# Nodes: 169343
# Edges: 2315598
# Train: 90941
# Val: 29799
# Test: 48603
# Classes: 40

in feats:  128
REG start----................................
Convert a graph into a bidirected graph: 1.391 seconds, peak memory: 27.712 GB
Construct multi-constraint weights: 0.000 seconds, peak memory: 27.712 GB
Metis partitioning: 5.934 seconds, peak memory: 28.572 GB
Split the graph: 4.845 seconds
Construct subgraphs: 0.028 seconds
REG metis partition end ----................................
REG construction  time spent:  3.9893832206726074
pure dgl.metis_partition the time spent:  12.233383178710938
check_connections_block*********************************

the find indices time spent  0.051352739334106445

in edges time spent  0.1651458740234375
local to global src and eids time spent  0.28548336029052734
time gen tails  0.0425419807434082
res  length 4
check_connections_block*********************************

the find indices time spent  0.06726503372192383

in edges time spent  0.4434385299682617
local to global src and eids time spent  0.6316206455230713
time gen tails  0.07362914085388184
res  length 4
check_connections_block*********************************

the find indices time spent  0.09253430366516113

in edges time spent  0.4934883117675781
local to global src and eids time spent  0.7733845710754395
time gen tails  0.1248617172241211
res  length 4
connection checking time:  3.7048354148864746
block generation total time  1.8510956764221191
step  0
----------------------------------------after batch_pred = model(blocks, batch_inputs)
 Nvidia-smi: 4.841796875 GB
    Memory Allocated: 2.9755406379699707  GigaBytes
Max Memory Allocated: 3.172999858856201  GigaBytes

----------------------------------------after loss function
 Nvidia-smi: 4.841796875 GB
    Memory Allocated: 2.9789838790893555  GigaBytes
Max Memory Allocated: 3.172999858856201  GigaBytes

step  1
----------------------------------------after batch_pred = model(blocks, batch_inputs)
 Nvidia-smi: 6.193359375 GB
    Memory Allocated: 2.8665590286254883  GigaBytes
Max Memory Allocated: 3.172999858856201  GigaBytes

----------------------------------------after loss function
 Nvidia-smi: 6.193359375 GB
    Memory Allocated: 2.8700075149536133  GigaBytes
Max Memory Allocated: 3.172999858856201  GigaBytes

step  2
----------------------------------------after batch_pred = model(blocks, batch_inputs)
 Nvidia-smi: 9.595703125 GB
    Memory Allocated: 5.798550605773926  GigaBytes
Max Memory Allocated: 6.277626037597656  GigaBytes

----------------------------------------after loss function
 Nvidia-smi: 9.595703125 GB
    Memory Allocated: 5.80259370803833  GigaBytes
Max Memory Allocated: 6.277626037597656  GigaBytes

step  3
----------------------------------------after batch_pred = model(blocks, batch_inputs)
 Nvidia-smi: 10.138671875 GB
    Memory Allocated: 5.7276506423950195  GigaBytes
Max Memory Allocated: 6.277626037597656  GigaBytes

----------------------------------------after loss function
 Nvidia-smi: 10.138671875 GB
    Memory Allocated: 5.731263637542725  GigaBytes
Max Memory Allocated: 6.277626037597656  GigaBytes

pure train time  1.7924072742462158
-----------------------------------------after optimizer zero grad
 Nvidia-smi: 10.138671875 GB
    Memory Allocated: 0.1461348533630371  GigaBytes
Max Memory Allocated: 6.277626037597656  GigaBytes

----------------------------------------------------------pseudo_mini_loss sum 3.9842514991760254
REG start----................................
Convert a graph into a bidirected graph: 1.416 seconds, peak memory: 50.971 GB
Construct multi-constraint weights: 0.000 seconds, peak memory: 50.971 GB
Metis partitioning: 5.978 seconds, peak memory: 51.805 GB
Split the graph: 4.336 seconds
Construct subgraphs: 0.039 seconds
REG metis partition end ----................................
REG construction  time spent:  3.8992762565612793
pure dgl.metis_partition the time spent:  11.786214351654053
check_connections_block*********************************

the find indices time spent  0.05999326705932617

in edges time spent  0.16927099227905273
local to global src and eids time spent  0.2686009407043457
time gen tails  0.04482436180114746
res  length 4
check_connections_block*********************************

the find indices time spent  0.07784652709960938

in edges time spent  0.43390893936157227
local to global src and eids time spent  0.657005786895752
time gen tails  0.08280253410339355
res  length 4
check_connections_block*********************************

the find indices time spent  0.09261798858642578

in edges time spent  0.48581957817077637
local to global src and eids time spent  0.7626285552978516
time gen tails  0.12325930595397949
res  length 4
connection checking time:  3.697258710861206
block generation total time  2.042919635772705
step  0
----------------------------------------after batch_pred = model(blocks, batch_inputs)
 Nvidia-smi: 10.138671875 GB
    Memory Allocated: 2.8356728553771973  GigaBytes
Max Memory Allocated: 6.277626037597656  GigaBytes

----------------------------------------after loss function
 Nvidia-smi: 10.138671875 GB
    Memory Allocated: 2.839108943939209  GigaBytes
Max Memory Allocated: 6.277626037597656  GigaBytes

step  1
----------------------------------------after batch_pred = model(blocks, batch_inputs)
 Nvidia-smi: 10.138671875 GB
    Memory Allocated: 3.5910592079162598  GigaBytes
Max Memory Allocated: 6.277626037597656  GigaBytes

----------------------------------------after loss function
 Nvidia-smi: 10.138671875 GB
    Memory Allocated: 3.5950441360473633  GigaBytes
Max Memory Allocated: 6.277626037597656  GigaBytes

step  2
----------------------------------------after batch_pred = model(blocks, batch_inputs)
 Nvidia-smi: 10.501953125 GB
    Memory Allocated: 5.8731536865234375  GigaBytes
Max Memory Allocated: 6.351174354553223  GigaBytes

----------------------------------------after loss function
 Nvidia-smi: 10.501953125 GB
    Memory Allocated: 5.876739978790283  GigaBytes
Max Memory Allocated: 6.351174354553223  GigaBytes

step  3
----------------------------------------after batch_pred = model(blocks, batch_inputs)
 Nvidia-smi: 12.4453125 GB
    Memory Allocated: 5.831116199493408  GigaBytes
Max Memory Allocated: 6.351174354553223  GigaBytes

----------------------------------------after loss function
 Nvidia-smi: 12.4453125 GB
    Memory Allocated: 5.834468841552734  GigaBytes
Max Memory Allocated: 6.351174354553223  GigaBytes

pure train time  1.411647081375122
-----------------------------------------after optimizer zero grad
 Nvidia-smi: 12.4453125 GB
    Memory Allocated: 0.15268802642822266  GigaBytes
Max Memory Allocated: 6.351174354553223  GigaBytes

----------------------------------------------------------pseudo_mini_loss sum 3.8641228675842285
REG start----................................
Convert a graph into a bidirected graph: 1.434 seconds, peak memory: 64.739 GB
Construct multi-constraint weights: 0.000 seconds, peak memory: 64.739 GB
Metis partitioning: 6.152 seconds, peak memory: 65.551 GB
Split the graph: 4.801 seconds
Construct subgraphs: 0.014 seconds
REG metis partition end ----................................
REG construction  time spent:  4.132899045944214
pure dgl.metis_partition the time spent:  12.418784618377686
check_connections_block*********************************

the find indices time spent  0.0627901554107666

in edges time spent  0.1656813621520996
local to global src and eids time spent  0.28357625007629395
time gen tails  0.04850029945373535
res  length 4
check_connections_block*********************************

the find indices time spent  0.07317733764648438

in edges time spent  0.4795832633972168
local to global src and eids time spent  0.6554372310638428
time gen tails  0.08412528038024902
res  length 4
check_connections_block*********************************

the find indices time spent  0.09373831748962402

in edges time spent  0.5126123428344727
local to global src and eids time spent  0.7478306293487549
time gen tails  0.11993217468261719
res  length 4
connection checking time:  3.759737014770508
block generation total time  2.0076494216918945
step  0
----------------------------------------after batch_pred = model(blocks, batch_inputs)
 Nvidia-smi: 12.4453125 GB
    Memory Allocated: 2.7466835975646973  GigaBytes
Max Memory Allocated: 6.351174354553223  GigaBytes

----------------------------------------after loss function
 Nvidia-smi: 12.4453125 GB
    Memory Allocated: 2.7500367164611816  GigaBytes
Max Memory Allocated: 6.351174354553223  GigaBytes

step  1
----------------------------------------after batch_pred = model(blocks, batch_inputs)
 Nvidia-smi: 12.4453125 GB
    Memory Allocated: 3.5497384071350098  GigaBytes
Max Memory Allocated: 6.351174354553223  GigaBytes

----------------------------------------after loss function
 Nvidia-smi: 12.4453125 GB
    Memory Allocated: 3.5532021522521973  GigaBytes
Max Memory Allocated: 6.351174354553223  GigaBytes

step  2
----------------------------------------after batch_pred = model(blocks, batch_inputs)
 Nvidia-smi: 12.4453125 GB
    Memory Allocated: 5.761885166168213  GigaBytes
Max Memory Allocated: 6.351174354553223  GigaBytes

----------------------------------------after loss function
 Nvidia-smi: 12.4453125 GB
    Memory Allocated: 5.765358924865723  GigaBytes
Max Memory Allocated: 6.351174354553223  GigaBytes

step  3
----------------------------------------after batch_pred = model(blocks, batch_inputs)
 Nvidia-smi: 12.810546875 GB
    Memory Allocated: 5.979132175445557  GigaBytes
Max Memory Allocated: 6.464842319488525  GigaBytes

----------------------------------------after loss function
 Nvidia-smi: 12.810546875 GB
    Memory Allocated: 5.983038425445557  GigaBytes
Max Memory Allocated: 6.464842319488525  GigaBytes

pure train time  1.364293098449707
-----------------------------------------after optimizer zero grad
 Nvidia-smi: 12.810546875 GB
    Memory Allocated: 0.16060352325439453  GigaBytes
Max Memory Allocated: 6.464842319488525  GigaBytes

----------------------------------------------------------pseudo_mini_loss sum 3.7988271713256836
loading full batch data spends  0.1435253620147705
REG start----................................
Convert a graph into a bidirected graph: 1.467 seconds, peak memory: 66.468 GB
Construct multi-constraint weights: 0.000 seconds, peak memory: 66.468 GB
Metis partitioning: 6.123 seconds, peak memory: 66.468 GB
Split the graph: 5.145 seconds
Construct subgraphs: 0.023 seconds
REG metis partition end ----................................
REG construction  time spent:  4.150771856307983
pure dgl.metis_partition the time spent:  12.773653507232666
check_connections_block*********************************

the find indices time spent  0.06885910034179688

in edges time spent  0.16355204582214355
local to global src and eids time spent  0.28134584426879883
time gen tails  0.047667741775512695
res  length 4
check_connections_block*********************************

the find indices time spent  0.07250523567199707

in edges time spent  0.45452404022216797
local to global src and eids time spent  0.6613702774047852
time gen tails  0.0824892520904541
res  length 4
check_connections_block*********************************

the find indices time spent  0.08433008193969727

in edges time spent  0.496382474899292
local to global src and eids time spent  0.7621145248413086
time gen tails  0.1213216781616211
res  length 4
connection checking time:  3.756932497024536
block generation total time  2.021059274673462
generate_dataloader_block spend   23.51861071586609
step  0
----------------------------------------after batch_pred = model(blocks, batch_inputs)
 Nvidia-smi: 12.810546875 GB
    Memory Allocated: 5.820253849029541  GigaBytes
Max Memory Allocated: 6.464842319488525  GigaBytes

----------------------------------------after loss function
 Nvidia-smi: 12.810546875 GB
    Memory Allocated: 5.8237457275390625  GigaBytes
Max Memory Allocated: 6.464842319488525  GigaBytes

step  1
----------------------------------------after batch_pred = model(blocks, batch_inputs)
 Nvidia-smi: 12.810546875 GB
    Memory Allocated: 5.9218268394470215  GigaBytes
Max Memory Allocated: 6.464842319488525  GigaBytes

----------------------------------------after loss function
 Nvidia-smi: 12.810546875 GB
    Memory Allocated: 5.925689697265625  GigaBytes
Max Memory Allocated: 6.464842319488525  GigaBytes

step  2
----------------------------------------after batch_pred = model(blocks, batch_inputs)
 Nvidia-smi: 12.810546875 GB
    Memory Allocated: 3.6840124130249023  GigaBytes
Max Memory Allocated: 6.464842319488525  GigaBytes

----------------------------------------after loss function
 Nvidia-smi: 12.810546875 GB
    Memory Allocated: 3.6879115104675293  GigaBytes
Max Memory Allocated: 6.464842319488525  GigaBytes

step  3
----------------------------------------after batch_pred = model(blocks, batch_inputs)
 Nvidia-smi: 12.810546875 GB
    Memory Allocated: 2.8023276329040527  GigaBytes
Max Memory Allocated: 6.464842319488525  GigaBytes

----------------------------------------after loss function
 Nvidia-smi: 12.810546875 GB
    Memory Allocated: 2.805685043334961  GigaBytes
Max Memory Allocated: 6.464842319488525  GigaBytes

pure train time  1.3351144790649414
-----------------------------------------after optimizer zero grad
 Nvidia-smi: 12.810546875 GB
    Memory Allocated: 0.1296377182006836  GigaBytes
Max Memory Allocated: 6.464842319488525  GigaBytes

----------------------------------------------------------pseudo_mini_loss sum 3.7744131088256836
loading full batch data spends  0.15272903442382812
REG start----................................
Convert a graph into a bidirected graph: 1.443 seconds, peak memory: 66.740 GB
Construct multi-constraint weights: 0.000 seconds, peak memory: 66.740 GB
Metis partitioning: 6.337 seconds, peak memory: 66.740 GB
Split the graph: 4.855 seconds
Construct subgraphs: 0.018 seconds
REG metis partition end ----................................
REG construction  time spent:  4.094136714935303
pure dgl.metis_partition the time spent:  12.673355102539062
check_connections_block*********************************

the find indices time spent  0.06174349784851074

in edges time spent  0.16557741165161133
local to global src and eids time spent  0.2698802947998047
time gen tails  0.04599809646606445
res  length 4
check_connections_block*********************************

the find indices time spent  0.0854177474975586

in edges time spent  0.4761831760406494
local to global src and eids time spent  0.7060749530792236
time gen tails  0.08895993232727051
res  length 4
check_connections_block*********************************

the find indices time spent  0.09705877304077148

in edges time spent  0.5080845355987549
local to global src and eids time spent  0.7707600593566895
time gen tails  0.11969327926635742
res  length 4
connection checking time:  3.8699324131011963
block generation total time  2.008362293243408
generate_dataloader_block spend   23.449450731277466
step  0
----------------------------------------after batch_pred = model(blocks, batch_inputs)
 Nvidia-smi: 12.810546875 GB
    Memory Allocated: 3.692145824432373  GigaBytes
Max Memory Allocated: 6.464842319488525  GigaBytes

----------------------------------------after loss function
 Nvidia-smi: 12.810546875 GB
    Memory Allocated: 3.695614814758301  GigaBytes
Max Memory Allocated: 6.464842319488525  GigaBytes

step  1
----------------------------------------after batch_pred = model(blocks, batch_inputs)
 Nvidia-smi: 12.810546875 GB
    Memory Allocated: 2.7960033416748047  GigaBytes
Max Memory Allocated: 6.464842319488525  GigaBytes

----------------------------------------after loss function
 Nvidia-smi: 12.810546875 GB
    Memory Allocated: 2.7996344566345215  GigaBytes
Max Memory Allocated: 6.464842319488525  GigaBytes

step  2
----------------------------------------after batch_pred = model(blocks, batch_inputs)
 Nvidia-smi: 12.810546875 GB
    Memory Allocated: 5.754420757293701  GigaBytes
Max Memory Allocated: 6.464842319488525  GigaBytes

----------------------------------------after loss function
 Nvidia-smi: 12.810546875 GB
    Memory Allocated: 5.758077621459961  GigaBytes
Max Memory Allocated: 6.464842319488525  GigaBytes

step  3
----------------------------------------after batch_pred = model(blocks, batch_inputs)
 Nvidia-smi: 12.814453125 GB
    Memory Allocated: 5.847177982330322  GigaBytes
Max Memory Allocated: 6.464842319488525  GigaBytes

----------------------------------------after loss function
 Nvidia-smi: 12.814453125 GB
    Memory Allocated: 5.850654125213623  GigaBytes
Max Memory Allocated: 6.464842319488525  GigaBytes

pure train time  1.3272337913513184
-----------------------------------------after optimizer zero grad
 Nvidia-smi: 12.814453125 GB
    Memory Allocated: 0.1490788459777832  GigaBytes
Max Memory Allocated: 6.464842319488525  GigaBytes

----------------------------------------------------------pseudo_mini_loss sum 3.7619614601135254
Total (block generation + training)time/epoch 25.216936349868774
pure train time/epoch 1.3272337913513184

num_input_list  [458816, 475008, 471717, 474492, 474769]
